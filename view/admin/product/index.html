<!--回复列表-->
{include file="public/header"}

<div class="content">
	<div class="page-inner">
		<div class="row">
			<div class="col-md-12">
                {:session('message')}
				<div class="card">
					<div class="card-header">
						<div class="card-title">
                            Product List
                            <a href="product/create" class="btn btn-sm btn-success float-right">Add</a>
                        </div>
					</div>
					<div class="card-body">
						<table class="table">
							<thead>
								<tr>
									<th scope="col">id</th>
									<th scope="col">Name</th>
									<th scope="col">Code</th>
									<th scope="col">Status</th>
									<th scope="col">Create Time</th>
									<th scope="col">Action</th>
								</tr>
							</thead>
							<tbody>
							    {volist name="products" id="product"}
								<tr>
									<td>{$product.id}</td>
									<td>{$product.name}</td>
									<td>{$product.code}</td>
									<td>
                                        <span class="badge {$product.status == 'active' ? 'badge-success' : 'badge-danger' }">{:ucfirst($product.status)}</span>
                                    </td>
									<td>{$product.create_time}</td>
									<td>
                                        <a href="#" class="btn btn-xs btn-danger" onclick="delete_item('{$product.id}')">
                                            <i class="fas fa-trash-alt"></i>
                                        </a>
                                        <a href="product/{$product.id}/edit" class="btn btn-xs btn-info" >
                                            <i class="fas fa-edit"></i>
                                        </a>
                                        <!-- <a href="product/show" class="btn btn-xs btn-secondary" >
                                            <i class="fas fa-eye"></i>
                                        </a> -->
                                    </td>
								</tr>
                                {/volist}
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

{include file="public/footer"}

<script>
    function delete_item(id){
        $.post('{:env("app.app_url")}product/delete',{'id':id},function(res){
              if(res.code>0){
                $.notify({
                	icon: 'flaticon-alarm-1',
                	title: '操作提示',
                	message: res.msg,
                },{
                	type: 'info',
                	placement: {
                		from: "bottom",
                		align: "right"
                	},
                	time: 1000,
                });
            }else{

               $.notify({
                	icon: 'flaticon-alarm-1',
                	title: '操作提示',
                	message: res.msg,
                },{
                	type: 'info',
                	placement: {
                		from: "bottom",
                		align: "right"
                	},
                	time: 1000,
                });
                setTimeout(function(){location.reload()},800);
            }
        },'json')
    }
</script>